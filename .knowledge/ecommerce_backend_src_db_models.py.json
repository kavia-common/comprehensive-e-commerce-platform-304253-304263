{"is_source_file": true, "format": "Python", "description": "This file defines SQLAlchemy ORM models for an e-commerce database schema. It includes models for users, roles, categories, products, inventory, carts, orders, order items, payments, and related join tables, as well as mixins for timestamps. The models map to existing database tables and specify relationships, constraints, and default values.", "external_files": ["src/db/base"], "external_methods": ["func.gen_random_uuid", "func.now"], "published": ["User", "Role", "UserRole", "Category", "Product", "ProductCategory", "Inventory", "Cart", "CartItem", "Address", "Order", "OrderItem", "Payment", "TimestampMixin"], "classes": [{"name": "TimestampMixin", "description": "A mixin providing common timestamp columns created_at and updated_at with default values and server-side functions."}, {"name": "User", "description": "Represents users with fields for email, password hash, name, phone, activity status, last login, and relationships to roles, addresses, carts, and orders."}, {"name": "Role", "description": "Represents roles that can be assigned to users, with name and description, and a relationship to users."}, {"name": "UserRole", "description": "Join table for many-to-many relationship between users and roles, with creation timestamp."}, {"name": "Category", "description": "Product category entity with hierarchical self-relationship, name, slug, description, and associated products."}, {"name": "Product", "description": "Represents products with SKU, name, description, price, currency, active status, inventory, and categories."}, {"name": "ProductCategory", "description": "Join table linking products and categories."}, {"name": "Inventory", "description": "Tracks stock levels for products: quantity on hand, reserved, reorder level, with constraints and relationship to Product."}, {"name": "Cart", "description": "Shopping cart associated with a user, with status, expiration, and items."}, {"name": "CartItem", "description": "Items in a cart, with product, quantity, unit price, and constraints."}, {"name": "Address", "description": "User addresses for shipping and billing, with detailed fields and default flags."}, {"name": "Order", "description": "Customer orders linked to users and carts, with status, totals, addresses, timestamps, and related order items and payments."}, {"name": "OrderItem", "description": "Items within an order, including product details, quantity, unit price, total, with constraints."}, {"name": "Payment", "description": "Payment records for orders, with provider info, status, amount, currency, idempotency, payload, and constraints."}], "methods": [], "calls": ["func.gen_random_uuid", "func.now"], "search-terms": ["ecommerce database ORM", "models for users, orders, products", "SQLAlchemy schema models", "PostgreSQL-specific columns", "relationship mapping", "inventory and order relationship", "user roles and permissions", "product categories hierarchy", "cart and checkout models"], "state": 2, "file_id": 7, "knowledge_revision": 17, "git_revision": "", "ctags": [{"_type": "tag", "name": "Address", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Address(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Cart", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Cart(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CartItem", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class CartItem(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Category", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Category(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Inventory", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Inventory(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Order", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Order(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OrderItem", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class OrderItem(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Payment", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Payment(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Product", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Product(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProductCategory", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class ProductCategory(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Role", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class Role(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TimestampMixin", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class TimestampMixin:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class User(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRole", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^class UserRole(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Cart", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "CartItem", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Inventory", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = (CheckConstraint(\"price_cents >= 0\", name=\"products_price_cents_check\"),)$/", "file": true, "language": "Python", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __table_args__ = (UniqueConstraint(\"parent_id\", \"name\", name=\"categories_parent_id_name_key\"/", "file": true, "language": "Python", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"addresses\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"cart_items\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "CartItem", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"carts\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Cart", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"categories\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"inventory\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Inventory", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"order_items\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"orders\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"payments\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"product_categories\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "ProductCategory", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"products\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"roles\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"user_roles\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "addresses", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    addresses: Mapped[List[\"Address\"]] = relationship(\"Address\", back_populates=\"user\", cascade=/", "language": "Python", "typeref": "typename:Mapped[List[\"Address\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "amount_cents", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    amount_cents: Mapped[int] = mapped_column(Integer, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "billing_address", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    billing_address: Mapped[Optional[Address]] = relationship(\"Address\", foreign_keys=[billing_a/", "language": "Python", "typeref": "typename:Mapped[Optional[Address]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "billing_address_id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    billing_address_id: Mapped[Optional[uuid.UUID]] = mapped_column(UUID(as_uuid=True), ForeignK/", "language": "Python", "typeref": "typename:Mapped[Optional[uuid.UUID]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    cart: Mapped[Cart] = relationship(\"Cart\", back_populates=\"items\")$/", "language": "Python", "typeref": "typename:Mapped[Cart]", "kind": "variable", "scope": "CartItem", "scopeKind": "class"}, {"_type": "tag", "name": "cart", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    cart: Mapped[Optional[Cart]] = relationship(\"Cart\")$/", "language": "Python", "typeref": "typename:Mapped[Optional[Cart]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "cart_id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    cart_id: Mapped[Optional[uuid.UUID]] = mapped_column(UUID(as_uuid=True), ForeignKey(\"carts.i/", "language": "Python", "typeref": "typename:Mapped[Optional[uuid.UUID]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "cart_id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    cart_id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), ForeignKey(\"carts.id\", ondele/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "CartItem", "scopeKind": "class"}, {"_type": "tag", "name": "carts", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    carts: Mapped[List[\"Cart\"]] = relationship(\"Cart\", back_populates=\"user\")$/", "language": "Python", "typeref": "typename:Mapped[List[\"Cart\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "categories", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    categories: Mapped[List[Category]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[Category]]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    category_id: Mapped[uuid.UUID] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "ProductCategory", "scopeKind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    city: Mapped[str] = mapped_column(Text, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "country_code", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    country_code: Mapped[str] = mapped_column(CHAR(2), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "ProductCategory", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "TimestampMixin", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    currency: Mapped[str] = mapped_column(CHAR(3), nullable=False, server_default=\"USD\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    currency: Mapped[str] = mapped_column(CHAR(3), nullable=False, server_default=\"USD\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    currency: Mapped[str] = mapped_column(CHAR(3), nullable=False, server_default=\"USD\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "discount_cents", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    discount_cents: Mapped[int] = mapped_column(Integer, nullable=False, server_default=\"0\")$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    email: Mapped[str] = mapped_column(Text, nullable=False, unique=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    expires_at: Mapped[Optional[datetime]] = mapped_column(DateTime(timezone=True), nullable=Tru/", "language": "Python", "typeref": "typename:Mapped[Optional[datetime]]", "kind": "variable", "scope": "Cart", "scopeKind": "class"}, {"_type": "tag", "name": "full_name", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    full_name: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Cart", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "CartItem", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Inventory", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "Role", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    id: Mapped[uuid.UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, server_default=f/", "language": "Python", "typeref": "typename:Mapped[uuid.UUID]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "idempotency_key", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    idempotency_key: Mapped[Optional[str]] = mapped_column(Text, nullable=True, unique=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "inventory", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    inventory: Mapped[Optional[\"Inventory\"]] = relationship(\"Inventory\", back_populates=\"product/", "language": "Python", "typeref": "typename:Mapped[Optional[\"Inventory\"]]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(Boolean, nullable=False, server_default=\"true\")$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "Product", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(Boolean, nullable=False, server_default=\"true\")$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "is_default_billing", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    is_default_billing: Mapped[bool] = mapped_column(Boolean, nullable=False, server_default=\"fa/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "is_default_shipping", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    is_default_shipping: Mapped[bool] = mapped_column(Boolean, nullable=False, server_default=\"f/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    items: Mapped[List[\"CartItem\"]] = relationship(\"CartItem\", back_populates=\"cart\", cascade=\"a/", "language": "Python", "typeref": "typename:Mapped[List[\"CartItem\"]]", "kind": "variable", "scope": "Cart", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    items: Mapped[List[\"OrderItem\"]] = relationship(\"OrderItem\", back_populates=\"order\", cascade/", "language": "Python", "typeref": "typename:Mapped[List[\"OrderItem\"]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "label", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    label: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Address", "scopeKind": "class"}, {"_type": "tag", "name": "last_login_at", "path": "/home/kavia/workspace/code-generation/comprehensive-e-commerce-platform-304253-304263/ecommerce_backend/src/db/models.py", "pattern": "/^    last_login_at: Mapped[Optional[datetime]] = mapped_column(DateTime(timezone=True), nullable=/", "language": "Python", "typeref": "typename:Mapped[Optional[datetime]]", "kind": "variable", "scope": "User", "scopeKind": "class"}], "hash": "eae25e71b4e2b5bfec32ea4cceabf3fa", "format-version": 4, "code-base-name": "ecommerce_backend", "filename": "ecommerce_backend/src/db/models.py", "fields": [{"name": "__table_args__ = (", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "__table_args__ = (CheckConstraint(\"price_cents >= 0\", name=\"products_price_cents_check\"),)", "scope": "Product", "scopeKind": "class", "description": "unavailable"}, {"name": "__table_args__ = (UniqueConstraint(\"parent_id\", \"name\", name=\"categories_parent_id_name_key\"/", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"addresses\"", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"cart_items\"", "scope": "CartItem", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"carts\"", "scope": "Cart", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"categories\"", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"inventory\"", "scope": "Inventory", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"order_items\"", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"orders\"", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"payments\"", "scope": "Payment", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"product_categories\"", "scope": "ProductCategory", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"products\"", "scope": "Product", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"roles\"", "scope": "Role", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"user_roles\"", "scope": "UserRole", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"Address\"]] addresses", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] amount_cents", "scope": "Payment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[Address]] billing_address", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[uuid.UUID]] billing_address_id", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Cart] cart", "scope": "CartItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[Cart]] cart", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[uuid.UUID]] cart_id", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[uuid.UUID] cart_id", "scope": "CartItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"Cart\"]] carts", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[Category]] categories", "scope": "Product", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[uuid.UUID] category_id", "scope": "ProductCategory", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] city", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] country_code", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] currency", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] description", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] discount_cents", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[datetime]] expires_at", "scope": "Cart", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] full_name", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[uuid.UUID] id", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] idempotency_key", "scope": "Payment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[\"Inventory\"]] inventory", "scope": "Product", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_active", "scope": "Product", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_default_billing", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_default_shipping", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"CartItem\"]] items", "scope": "Cart", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"OrderItem\"]] items", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] label", "scope": "Address", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[datetime]] last_login_at", "scope": "User", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"17": ""}]}